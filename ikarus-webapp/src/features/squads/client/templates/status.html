<template name="squads_status">
  {{#unless currentSquad}}
    {{#if currentCompany}}
      <div class="info-box bg-info">
        <p>
          To play a game round, create or join a <strong>squad</strong>.
          Squads are formed from the people in your <strong>company</strong>, {{currentCompany.getName}}.
        </p>
        {{#if currentUser}}
          {{#each joinableSquads}}
            <button class="joinSquad btn btn-primary btn-lg" data-squadId={{_id}}>Join {{getName}} squad</button> or
          {{/each}}

          <button class="createSquad btn btn-primary btn-lg">Create squad</button>
          <a href="{{pathFor route='character'}}" class="pull-right btn btn-primary btn-lg">Character settings</a>
        {{/if}}
      </div>
    {{/if}}
  {{/unless}}

  {{#if currentSquad}}
    <div class="info-box bg-info">
      Select an <strong>objective</strong>, fill your squad <strong>inventory</strong> and get <strong>ready</strong>!
    </div>

    <h1>
      {{currentSquad.getName}} squad {{currentSquad.getAmountOfMembers}} / {{currentSquad.getMaxMembers}}
    </h1>

    <div class="row">
      {{#with currentSquad}}
        <div class="col-md-4">
          {{> squad_players}}
        </div>
        <div class="col-md-4">

        </div>
        <div class="col-md-4">
          {{> squad_queue_status}}
        </div>
      {{/with}}
    </div>

    <div class="row">
      {{#with currentSquad}}
        <div class="col-md-4">
          {{> squad_objective}}
        </div>
        <div class="col-md-4">
          {{> squadMemberInventory}}
        </div>
      {{/with}}
      <div class="col-md-4">
        <h2>Armory</h2>
        {{#with currentCompany}}
          {{> armory}}
        {{/with}}
      </div>

    </div>
  {{/if}}
</template>

<template name="squad_players">
  <h2>Players</h2>
  {{#each getPlayers}}
    <h4>
      {{> players_avatar this}}{{> players_name this}}
      {{# if this = currentUser }}
        <button class="leaveSquad">Leave</button>
      {{/if}}
    </h4>
  {{/each}}
</template>

<template name="squad_queue_status">
  {{#if inQueue}}
    <h1>Waiting for server</h1>
    <button class="leaveQueue btn btn-primary btn-lg btn-block">Not ready</button>
  {{/if}}

  {{#if canJoinGame}}
    <h2>Time to join {{getTimeToJoinServer}}</h2>
    <a class="btn btn-primary btn-lg btn-block" href="{{inGameServer.getJoinUrl}}">
      Click to join server {{inGameServer.name}}
    </a>
    <table class="add-top">
      <tr>
        <th>Host</th>
        <th>Port</th>
        <th>Password</th>
      </tr>
      <tr>
        <td>{{inGameServer.host}}</td>
        <td>{{inGameServer.port}}</td>
        <td>{{inGameServer.password}}</td>
      </tr>
    </table>
  {{/if}}

  {{#if notInQueueOrGame}}
    <button class="joinQueue btn btn-primary btn-lg btn-block">Ready</button>
  {{/if}}
</template>













