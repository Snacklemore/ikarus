lootItems_definitions = [
  ['warsaw_tacticool', 
    [
      ['hlc_rifle_ak12'],
      ['hlc_rifle_ak12GL'],
      ['hlc_rifle_RPK12'],
      ['CUP_srifle_LeeEnfield_rail', 'CUP_10x_303_M','CUP_10x_303_M','CUP_10x_303_M','CUP_10x_303_M','CUP_10x_303_M']
    ]
  ],

  ['warsaw_misc',
    [
      ['CUP_srifle_LeeEnfield', 'CUP_10x_303_M','CUP_10x_303_M','CUP_10x_303_M','CUP_10x_303_M','CUP_10x_303_M']
    ]
  ],
  ['opfor_light_sniper', [['srifle_DMR_01_F', '10Rnd_762x54_Mag', '10Rnd_762x54_Mag']]],
  ['warsaw_heavy', 
    [
      ['CUP_launch_RPG7V', 'CUP_PG7V_M', 'CUP_PG7V_M', 'B_AssaultPack_khk'],
      ['CUP_lmg_PKM', 'CUP_100Rnd_TE4_LRT4_762x54_PK_Tracer_Green_M', 'CUP_100Rnd_TE4_LRT4_762x54_PK_Tracer_Green_M'],
      ['CUP_glaunch_M79', '1Rnd_HE_Grenade_shell', '1Rnd_HE_Grenade_shell', '1Rnd_HE_Grenade_shell']
    ]
  ],
  ['medium_optics', ['optic_Arco', 'optic_Hamr', 'optic_MRCO']],
  ['bibods', ['bipod_01_F_blk', 'bipod_01_F_mtp', 'bipod_01_F_snd', 'bipod_02_F_blk', 'bipod_03_F_oli']],
  ['reflexsights', 
    [
      'optic_Holosight_smg', 'optic_Aco_smg', 'optic_ACO_grn_smg',
      'optic_Holosight', 'optic_Aco', 'optic_ACO_grn', 'CUP_optic_CompM4'
    ]
  ],
  ['modern_tacticool', 
    [
      ['arifle_Mk20_F', '30Rnd_556x45_Stanag', '30Rnd_556x45_Stanag'],
      ['arifle_Mk20_plain_F', '30Rnd_556x45_Stanag', '30Rnd_556x45_Stanag'],
      ['arifle_Mk20C_F', '30Rnd_556x45_Stanag', '30Rnd_556x45_Stanag'],
      ['arifle_Mk20C_plain_F', '30Rnd_556x45_Stanag', '30Rnd_556x45_Stanag'],
      ['arifle_Mk20_GL_F', '30Rnd_556x45_Stanag', '30Rnd_556x45_Stanag'],
      ['arifle_Mk20_GL_plain_F', '30Rnd_556x45_Stanag', '30Rnd_556x45_Stanag'],

      ['arifle_TRG21_F', '30Rnd_556x45_Stanag', '30Rnd_556x45_Stanag'],
      ['arifle_TRG20_F', '30Rnd_556x45_Stanag', '30Rnd_556x45_Stanag'],
      ['arifle_TRG21_GL_F', '30Rnd_556x45_Stanag', '30Rnd_556x45_Stanag']
    ]
  ],
  ['nato_tacticool', 
    [
      ['hlc_rifle_RU556', '30Rnd_556x45_Stanag', '30Rnd_556x45_Stanag'],
      ['hlc_rifle_RU5562', '30Rnd_556x45_Stanag', '30Rnd_556x45_Stanag'],
      ['hlc_rifle_CQBR', '30Rnd_556x45_Stanag', '30Rnd_556x45_Stanag'],
      ['hlc_rifle_bcmjack', '30Rnd_556x45_Stanag', '30Rnd_556x45_Stanag'],
      ['hlc_rifle_Bushmaster300', '29rnd_300BLK_STANAG', '29rnd_300BLK_STANAG'],
      ['hlc_rifle_vendimus', '29rnd_300BLK_STANAG', '29rnd_300BLK_STANAG'],
      ['hlc_rifle_honeybadger', '29rnd_300BLK_STANAG', '29rnd_300BLK_STANAG', 'muzzle_HBADGER'],
      ['hlc_rifle_samr2', '30Rnd_556x45_Stanag', '30Rnd_556x45_Stanag'],
      ['hlc_rifle_auga1_b', 'hlc_30Rnd_556x45_B_AUG', 'hlc_30Rnd_556x45_B_AUG'],
      ['hlc_rifle_auga2_b', 'hlc_30Rnd_556x45_B_AUG', 'hlc_30Rnd_556x45_B_AUG']
    ]
  ],
  ['norail_battleRifles', 
    [
      ['hlc_rifle_M14', '20Rnd_762x51_Mag', '20Rnd_762x51_Mag'],
      ['hlc_rifle_c1A1', '20Rnd_762x51_Mag', '20Rnd_762x51_Mag'],
      ['hlc_rifle_c1A1', '20Rnd_762x51_Mag', '20Rnd_762x51_Mag']
    ]
  ],
  ['battleRifles', 
    [
      ['hlc_rifle_g3a3ris', '20Rnd_762x51_Mag', '20Rnd_762x51_Mag'],
      ['srifle_DMR_06_camo_F', '20Rnd_762x51_Mag', '20Rnd_762x51_Mag'],
      ['srifle_DMR_06_olive_F', '20Rnd_762x51_Mag', '20Rnd_762x51_Mag'],
      ['srifle_EBR_F', '20Rnd_762x51_Mag', '20Rnd_762x51_Mag'],
      ['srifle_DMR_03_F', '20Rnd_762x51_Mag', '20Rnd_762x51_Mag']
    ]
  ],
  ['machineguns', 
    [
      ['LMG_Mk200_F', '200Rnd_65x39_cased_Box'],
      ['LMG_Zafir_F', '150Rnd_762x54_Box'],
      ['launch_RPG32_F', 'RPG32_F']
    ]
  ],
  ['mx_special', 
    [
      ['arifle_MX_SW_F', '30Rnd_65x39_caseless_mag'],
      ['arifle_MX_SW_Black_F', '30Rnd_65x39_caseless_mag'],
      ['arifle_MXM_F', '30Rnd_65x39_caseless_mag'],
      ['arifle_MXM_Black_F', '30Rnd_65x39_caseless_mag']
    ]
  ],
  ['nato_mg', 
    [
      ['hlc_lmg_M249E2', 'hlc_200rnd_556x45_T_SAW'],
      ['hlc_m249_pip1', 'hlc_200rnd_556x45_T_SAW'],
      ['launch_NLAW_F', 'B_AssaultPack_khk']
    ]
  ],

  ['high_scopes', ['optic_DMS', 'optic_LRPS', 'optic_NVS', 'optic_SOS']],
  ['highend_weapon', 
    [
      ['MMG_01_hex_F', '150Rnd_93x64_Mag', '150Rnd_93x64_Mag', '150Rnd_93x64_Mag'],
      ['MMG_01_tan_F', '150Rnd_93x64_Mag', '150Rnd_93x64_Mag', '150Rnd_93x64_Mag'],

      ['MMG_02_camo_F', '130Rnd_338_Mag', '130Rnd_338_Mag', '130Rnd_338_Mag'],
      ['MMG_02_sand_F', '130Rnd_338_Mag', '130Rnd_338_Mag', '130Rnd_338_Mag'],
      ['MMG_02_black_F', '130Rnd_338_Mag', '130Rnd_338_Mag', '130Rnd_338_Mag'],

      ['srifle_DMR_02_F', '10Rnd_338_Mag', '10Rnd_338_Mag', '10Rnd_338_Mag', 'optic_DMS'],
      ['srifle_DMR_02_camo_F', '10Rnd_338_Mag', '10Rnd_338_Mag', '10Rnd_338_Mag', 'optic_DMS'],
      ['srifle_DMR_02_sniper_F', '10Rnd_338_Mag', '10Rnd_338_Mag', '10Rnd_338_Mag', 'optic_DMS'],


      ['srifle_DMR_03_F', '20Rnd_762x51_Mag', '20Rnd_762x51_Mag', '20Rnd_762x51_Mag', 'optic_DMS'],
      ['srifle_DMR_03_multicam_F', '20Rnd_762x51_Mag', '20Rnd_762x51_Mag', '20Rnd_762x51_Mag', 'optic_DMS'],
      ['srifle_DMR_03_woodland_F', '20Rnd_762x51_Mag', '20Rnd_762x51_Mag', '20Rnd_762x51_Mag', 'optic_DMS'],
    
      ['srifle_DMR_04_F', '10Rnd_127x54_Mag', '10Rnd_127x54_Mag', '10Rnd_127x54_Mag', 'optic_DMS'],
      ['srifle_DMR_04_Tan_F', '10Rnd_127x54_Mag', '10Rnd_127x54_Mag', '10Rnd_127x54_Mag', 'optic_DMS'],
    
      ['srifle_DMR_05_blk_F', '10Rnd_93x64_DMR_05_Mag', '10Rnd_93x64_DMR_05_Mag', '10Rnd_93x64_DMR_05_Mag', 'optic_DMS'],
      ['srifle_DMR_05_hex_F', '10Rnd_93x64_DMR_05_Mag', '10Rnd_93x64_DMR_05_Mag', '10Rnd_93x64_DMR_05_Mag', 'optic_DMS'],
      ['srifle_DMR_05_tan_F', '10Rnd_93x64_DMR_05_Mag', '10Rnd_93x64_DMR_05_Mag', '10Rnd_93x64_DMR_05_Mag', 'optic_DMS']
    
    ]
  ],
  [ 'intelligence', 
    [
      'IKRS_intelligence_weapon',
      'IKRS_intelligence_vehicle',
      'IKRS_intelligence_helo'   
    ]
  ],

  [
    'static weapons',
    [
      ['B_Mortar_01_support_F', 'B_Mortar_01_weapon_F'],
      ['RDS_M2_MiniTripod_Bag', 'RDS_M2_Gun_Bag'],
      ['RDS_DShkM_TripodLow_Bag', 'RDS_DShkM_Gun_Bag']
    ]
  ],

  [
    'uav',
    [
      'B_UAV_01_backpack_F'
    ]
  ]
];

lootItems_populateHoldAirdropBox = {
  private ["_container"];
  _container = _this select 0;


  ['IKRS_loot_nato_standard', _container, 2, 2] call lootItems_addRandomAmount;
  ['IKRS_loot_nato_ammo', _container, 2, 0] call lootItems_addRandomAmount;
  ['IKRS_loot_armor_medium', _container, 2, 0] call lootItems_addRandomAmount;
  ['IKRS_loot_valuables', _container, 3, -1] call lootItems_addRandomAmount;
  [['modern_tacticool', 'nato_tacticool'], _container, 3, 0] call lootItems_addRandomAmount;
  ['medium_optics', _container, 5, -4] call lootItems_addRandomAmount;
  ['bibods', _container, 3, 1] call lootItems_addRandomAmount;
  ['reflexsights', _container, 5, 2] call lootItems_addRandomAmount;
  [['norail_battleRifles', 'nato_mg'], _container, 3, -2] call lootItems_addRandomAmount;
  ['IKRS_loot_key1', _container, 1, 0] call lootItems_addRandomAmount;
  ['uav', _container, 2, -1] call lootItems_addRandomAmount;
  
};

lootItems_populateSupplyBox = {
  private ["_container", "_lootFunction", "_arguments", "_extraLoot"];
  _container = _this select 0;
  _lootFunction = _this select 1;
  _extraLoot = _this select 2;

  _arguments = [_container];

  call compile format ["_arguments call %1;", _lootFunction];

  {
    [_x, _container] call lootItems_addItemToContainer;
  } forEach _extraLoot;
};

lootItems_populateSupplyBoxLevel_0 = {
  private ["_container"];
  _container = _this select 0;
  
  ['IKRS_loot_warsaw_old', _container, 2, 1] call lootItems_addRandomAmount;
  ['IKRS_loot_warsaw_standard', _container, 3, 3] call lootItems_addRandomAmount;
  ['IKRS_loot_warsaw_ammo', _container, 0, 1] call lootItems_addRandomAmount;
  ['IKRS_loot_armor_light', _container, 2, 1] call lootItems_addRandomAmount;
  ['IKRS_loot_armor_medium', _container, 3, -2] call lootItems_addRandomAmount;

  ['warsaw_tacticool', _container, 10, -8] call lootItems_addRandomAmount;
  ['opfor_light_sniper', _container, 20, -19] call lootItems_addRandomAmount;
  ['warsaw_heavy', _container, 3, -2] call lootItems_addRandomAmount;
  ['warsaw_misc', _container, 2, -1] call lootItems_addRandomAmount;

  ['HLC_Optic_PSO1', _container, 5, -4] call lootItems_addRandomAmount;
  ['hlc_optic_kobra', _container, 4, 3] call lootItems_addRandomAmount;

  ['static weapons', _container, 5, -4] call lootItems_addRandomAmount;
};

lootItems_populateSupplyBoxLevel_1 = {
  private ["_container"];
  _container = _this select 0;

  ['IKRS_loot_warsaw_ammo', _container, 2, 1] call lootItems_addRandomAmount;
  [['warsaw_tacticool', 'modern_tacticool', 'nato_tacticool'], _container, 10, -8] call lootItems_addRandomAmount;
  [['opfor_light_sniper', 'warsaw_heavy'], _container, 20, -19] call lootItems_addRandomAmount;
  ['HLC_Optic_PSO1', _container, 3, 0] call lootItems_addRandomAmount;
  ['hlc_optic_kobra', _container, 4, 3] call lootItems_addRandomAmount;
  ['IKRS_loot_nato_ammo', _container, 2, 0] call lootItems_addRandomAmount;
  ['IKRS_loot_armor_medium', _container, 2, 2] call lootItems_addRandomAmount;
  ['IKRS_loot_valuables', _container, 3, 1] call lootItems_addRandomAmount;
  ['medium_optics', _container, 3, -1] call lootItems_addRandomAmount;
  ['bibods', _container, 3, 1] call lootItems_addRandomAmount;
  ['reflexsights', _container, 5, 2] call lootItems_addRandomAmount;
  [['norail_battleRifles', 'nato_mg'], _container, 3, -1] call lootItems_addRandomAmount;
  ['IKRS_loot_key2', _container, 1, 0] call lootItems_addRandomAmount;
  ['high_scopes', _container, 5, -4] call lootItems_addRandomAmount;
  ['battleRifles', _container, 3, -2] call lootItems_addRandomAmount;
  
};

lootItems_populateManhuntCache = {
  private ["_container"];
  _container = _this select 0;

  [['modern_tacticool', 'nato_tacticool'], _container, 3, 1] call lootItems_addRandomAmount;
  ['medium_optics', _container, 3, -2] call lootItems_addRandomAmount;
  ['bibods', _container, 3, 1] call lootItems_addRandomAmount;
  ['reflexsights', _container, 3, 2] call lootItems_addRandomAmount;
  [['norail_battleRifles', 'nato_mg'], _container, 2, 1] call lootItems_addRandomAmount;
  ['IKRS_loot_key1', _container, 1, 0] call lootItems_addRandomAmount;
  ['battleRifles', _container, 3, -2] call lootItems_addRandomAmount;
  ['uav', _container, 3, -2] call lootItems_addRandomAmount;
};

lootItems_populateSupplyBoxLevel_2 = {
  private ["_container"];
  _container = _this select 0;
  

  [['IKRS_loot_nato_modern', 'IKRS_loot_csat_modern'], _container, 2, 1] call lootItems_addRandomAmount;
  [['IKRS_loot_nato_modern_ammo', 'IKRS_loot_csat_modern_ammo'], _container, 2, 0] call lootItems_addRandomAmount;
  ['IKRS_loot_armor_heavy', _container, 2, 1] call lootItems_addRandomAmount;
  ['IKRS_loot_valuables', _container, 3, 2] call lootItems_addRandomAmount;
  ['medium_optics', _container, 3, 1] call lootItems_addRandomAmount;
  ['bibods', _container, 3, 1] call lootItems_addRandomAmount;
  ['intelligence', _container, 1, 0] call lootItems_addRandomAmount;
  ['high_scopes', _container, 5, -4] call lootItems_addRandomAmount;
  ['battleRifles', _container, 2, 0] call lootItems_addRandomAmount;
  [['machineguns', 'mx_special'], _container, 2, 0] call lootItems_addRandomAmount;
  
};

lootItems_populateSupplyBoxLevel_3 = {
  private ["_container"];
  _container = _this select 0;
  
  ['highend_weapon', _container, 1, 0] call lootItems_addRandomAmount;
  ['high_scopes', _container, 1, 0] call lootItems_addRandomAmount;
};

lootItems_populateSupplyBoxLevel_4 = {
  private ["_container"];
  _container = _this select 0;

  [['battleRifles', 'modern_tacticool', 'nato_tacticool'], _container, 2, 0] call lootItems_addRandomAmount;
};

lootItems_getRandomAmount = {
  private ["_random", "_add"];
  _random = _this select 0;
  _add = _this select 1;
  (ceil random _random) + _add;
};

lootItems_addRandomAmount = {
  private ["_class", "_container", "_random", "_add", "_amount", "_item"];
  _class = _this select 0;
  _container = _this select 1;
  _random = _this select 2;
  _add = _this select 3;

  

  _amount = [_random, _add] call lootItems_getRandomAmount;

  if (_amount <= 0) exitWith {};

  for "_i" from 1 to _amount do {
    _item = _class;
    if (typeName _item == "ARRAY") then {
      _item = _item call BIS_fnc_selectRandom;
    };
    [_item, _container] call lootItems_addItemToContainer;
  };
};

lootItems_addItemToContainer = {
  private ["_class", "_container", "_items"];
  _class = _this select 0;
  _container = _this select 1;

  _items = [_class] call lootItems_getItems;

  {
    [_x, _container] call equipment_addEquipment;
  } forEach _items;
};

lootItems_getItems = {
  private ["_class", "_result"];
  _class = _this select 0;
  _result = nil;

  {
    if ((_x select 0) == _class) exitWith {
      _result = (_x select 1) call BIS_fnc_selectRandom;
      if (typeName _result != "ARRAY") then {
        _result = [_result];
      }
    };
  } forEach lootItems_definitions;

  if (isNil {_result}) exitWith {
    [_class];
  };

  _result;
};